<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Solutions | TDLiD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="css/main.css">

<style>
    /* 팝업 모달 스타일 */
    .modal-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.85);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
    }
    .modal-content {
        background: #171717; /* Dark background */
        color: #ddd;
        padding: 30px;
        border-radius: 12px;
        max-width: 90%;
        max-height: 90%;
        text-align: center;
        border: 1px solid #333;
    }
    .modal-image {
        max-width: 100%;
        max-height: 80vh; /* 화면 높이에 맞춰 조정 */
        object-fit: contain;
        border-radius: 8px;
        margin-bottom: 20px;
        cursor: zoom-out;
    }
    .modal-close-btn {
        margin-top: 20px;
        padding: 10px 20px;
        background-color: #06b6d4; /* cyan-500 */
        color: black;
        font-weight: 600;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    .modal-close-btn:hover {
        background-color: #0891b2; /* cyan-600 */
    }

    /* Stack Container 스타일: 가로 스크롤 허용 */
    #stackContainer::-webkit-scrollbar {
        display: none; /* Chrome, Safari, Opera 숨김 */
    }
    #stackContainer {
        -ms-overflow-style: none; /* IE, Edge 숨김 */
        scrollbar-width: none; /* Firefox 숨김 */
    }

    /* 포커스 영역의 제목 및 설명 스타일 */
    #focusArea h4 {
        font-size: 1.5rem; /* Large title in focus area */
    }
    #focusArea p {
        font-size: 1rem;
    }
    
    /* 포커스 영역 이미지 스타일 */
    .focus-image-container img {
        height: auto; /* 고정 높이 설정 */
        object-fit: contain; /* (선택 사항) 이미지가 잘리지 않게 조정되며, 필요 시 여백 발생 */
        cursor: pointer;
    }
</style>
</head>

<body class="bg-neutral-950 text-neutral-100 font-[Pretendard] flex flex-col min-h-screen">

<header class="fixed top-0 left-0 w-full z-50 bg-neutral-950/80 backdrop-blur border-b border-neutral-800">
    <div class="max-w-7xl mx-auto flex items-center justify-between px-6 py-4">

        <a href="index.html" class="block">
            <h1 class="flex items-center gap-3 text-xl font-bold tracking-wide">
                <img src="images/logo/logo.png" alt="TDL Energy Logo" class="header-logo object-contain">
                <span class="animated-logo-text">TDL ENERGY INDONESIA</span>
            </h1>
        </a>

        <nav class="hidden md:flex items-center gap-10 text-sm text-neutral-300">
            <a href="index.html" class="nav-link">Home</a>
            <a href="products.html" class="nav-link">Products</a>
            <a href="technology.html" class="nav-link">Technology</a>
            <a href="solutions.html" class="nav-link text-white font-bold">Solutions</a>
            <a href="company.html" class="nav-link">Company</a>
            <a href="news.html" class="nav-link">News</a>
            <a href="contact.html" class="ml-4 px-5 py-2 rounded-xl bg-cyan-500 hover:bg-cyan-400 text-black font-semibold">
                Request Quote
            </a>
        </nav>

        <button id="mobileMenuBtn" class="md:hidden">☰</button>
    </div>

    <div id="mobileMenu" class="hidden md:hidden fixed top-16 right-6 bg-neutral-900 p-6 rounded-2xl shadow-xl border border-neutral-800 z-50 flex-col gap-4 text-white text-base">
        <a href="index.html" class="nav-link-mobile">Home</a>
        <a href="products.html" class="nav-link-mobile">Products</a>
        <a href="technology.html" class="nav-link-mobile">Technology</a>
        <a href="solutions.html" class="nav-link-mobile font-bold text-cyan-500">Solutions</a>
        <a href="company.html" class="nav-link-mobile">Company</a>
        <a href="news.html" class="nav-link-mobile">News</a>
        <a href="contact.html" class="nav-link-mobile mt-2 px-5 py-2 rounded-xl bg-cyan-500 text-black font-semibold text-center">
            Request Quote
        </a>
    </div>
</header>

<main class="flex-grow pt-32 pb-10 px-6">
    <div class="max-w-6xl mx-auto">
        <h3 class="text-3xl font-bold mb-10">Custom Solutions</h3>

        <div id="focusArea" class="mb-8 p-6 bg-neutral-900 rounded-xl border border-cyan-500/30 transition-all duration-500 shadow-xl">
            <p class="text-center text-neutral-500 py-10">Select a solution below to view details.</p>
        </div>

        <div id="stackContainer" class="flex gap-4 overflow-x-auto pb-4 justify-center">
            </div>
    </div>
</main>


<footer class="py-4 px-6 text-center text-neutral-500 border-t border-neutral-800">
    © 2025 TDL Energy Indonesia. All rights reserved.
</footer>

<script>
    // ----------------------------------------------------
    // 1. 솔루션 데이터 정의
    // ----------------------------------------------------
    const solutionsData = [
        { id: 'A', title: 'A. EV Motorcycle Conversion Business', desc: 'TDLID supplies electric motorcycle conversion kits and battery packs to local governments and universities in Indonesia.', images: ['images/solutions/solution1.png', 'images/solutions/solution1-1.png'] },
        { id: 'B', title: 'B. Employee Ownership Program', desc: 'TDLID is the initiator of this Program. TDLID announced the \'Employee Ownership Program\' with GESITS and MOTORIZ on April 30, 2024.', images: ['images/solutions/solution2.png', 'images/solutions/solution2-1.png'] },
        { id: 'C', title: 'C. Lease and Rental', desc: 'TDLiD offers leasing and rental financing solutions to accelerate the adoption of electric motorcycles.', images: ['images/solutions/solution3.png', 'images/solutions/solution3-1.png'] },
        { id: 'D', title: 'D. Solar home charging', desc: 'TDLiD offers solar power generation systems that can be utilized by individual households and small businesses to achieve true carbon zero in Indonesia\'s EV ecosystem.', images: ['images/solutions/solution4.png', 'images/solutions/solution4-1.png'] },
        { id: 'E', title: 'E. Battery Recycling', desc: 'TDLiD contributes to building a virtuous cycle ecosystem for raw materials of Indonesian nickel and recycled batteries, while providing a business model that can achieve true zero carbon in the electric motorcycle ecosystem.', images: ['images/solutions/solution5.png', 'images/solutions/solution5-1.png'] }
    ];

    const focusArea = document.getElementById('focusArea');
    const stackContainer = document.getElementById('stackContainer');
    let currentFocusId = null;

    // ----------------------------------------------------
    // 2. 팝업 창 함수
    // ----------------------------------------------------
    function openSolutionPopup(imageSrc, textContent) {
        const modal = document.createElement('div');
        modal.classList.add('modal-backdrop');

        modal.innerHTML = `
            <div class="modal-content">
                <img src="${imageSrc}" alt="Solution Detail" class="modal-image">
                <p style="margin-top: 10px; font-size: 16px;">${textContent}</p>
                <button class="modal-close-btn">Close</button>
            </div>
        `;

        modal.querySelector('.modal-close-btn').addEventListener('click', () => {
            document.body.removeChild(modal);
        });
        
        // 배경 클릭 시 닫기
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                document.body.removeChild(modal);
            }
        });

        document.body.appendChild(modal);
    }

    // ----------------------------------------------------
    // 3. 포커스 영역 렌더링 함수
    // ----------------------------------------------------
    function renderFocusArea(solution) {
        currentFocusId = solution.id;
        
        const imageHTML = solution.images.map(src => `
            <a href="#" class="openSolutionDetail focus-image-container w-full" 
               data-detail-src="${src}" 
               data-detail-text="${solution.desc}"
               onclick="openSolutionPopup('${src}', '${solution.desc.replace(/'/g, "\\'")}')"
            >
                <img src="${src}" class="w-full rounded-lg hover:ring-2 ring-cyan-500/50 transition" loading="lazy">
            </a>
        `).join('');

        focusArea.innerHTML = `
            <h4 class="font-bold text-cyan-400 mb-4">${solution.title}</h4>
            
            <div class="flex flex-col md:flex-row gap-6 mb-6 justify-center">
                ${imageHTML}
            </div>

            <p class="text-neutral-300 text-center">${solution.desc}</p>
        `;
    }

    // ----------------------------------------------------
    // 4. 스택 컨테이너 렌더링 함수
    // ----------------------------------------------------
    function renderStackContainer() {
        // 현재 포커스 아이템을 제외한 나머지 아이템 필터링
        const stackItems = solutionsData.filter(s => s.id !== currentFocusId);
        
        stackContainer.innerHTML = stackItems.map(s => `
            <div 
                id="stack-item-${s.id}" 
                class="stack-item p-4 bg-neutral-900 border border-neutral-800 rounded-xl cursor-pointer hover:border-cyan-500/50 transition-all duration-300 flex-shrink-0 w-32 md:w-48 text-center"
                data-solution-id="${s.id}"
                onclick="selectSolution('${s.id}')"
            >
                <h5 class="font-semibold text-xs mb-2 text-neutral-300">${s.title}</h5>
                <img src="${s.images[0]}" class="w-full h-16 object-cover rounded-lg opacity-70 transition-opacity" loading="lazy">
            </div>
        `).join('');
    }

    // ----------------------------------------------------
    // 5. 솔루션 선택 및 스왑 함수
    // ----------------------------------------------------
    function selectSolution(id) {
        const newSolution = solutionsData.find(s => s.id === id);
        if (!newSolution) return;

        renderFocusArea(newSolution);
        renderStackContainer();
        
        // 부드러운 스크롤 (Focus Area로 이동)
        focusArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // ----------------------------------------------------
    // 초기화: 첫 번째 솔루션을 기본으로 표시
    // ----------------------------------------------------
    if (solutionsData.length > 0) {
        // 첫 번째 항목을 포커스 영역에 표시
        renderFocusArea(solutionsData[0]);
        // 나머지 항목을 스택 컨테이너에 표시
        renderStackContainer();
    }
    
    // 모바일 메뉴 토글 (기존 로직 유지)
    document.getElementById('mobileMenuBtn').addEventListener('click', function() {
        document.getElementById('mobileMenu').classList.toggle('hidden');
        document.getElementById('mobileMenu').classList.toggle('flex');
    });
</script>

</body>
</html>